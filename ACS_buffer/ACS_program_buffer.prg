#/ Controller version = 3.11.01
#/ Date = 12/13/2023 1:01 PM
#/ User remarks = 
#1
! AXIS 0 HOMING 

SLIKI(0)	= 14300
SLIKP(0)	= 500

VEL(0)		= 50
ACC(0)		= 500
DEC(0)		= 500
JERK(0)		= 4000

SLPKP(0)	= 600
SLVKP(0)	= 130
SLVKI(0)	= 190

MFLAGS(0).#NOFILT =0 
SLVSOF(0)	= 1000
SLVSOFD(0)	= 0.707

MFLAGS(0).#NOTCH	= 0
SLVNATT(0)	= 5
SLVNFRQ(0)	= 300
SLVNWID(0)	= 30

MFLAGS(0).#BI_QUAD = 0
SLVB0DD(0)	= 0.707
SLVB0DF(0)	= 400
SLVB0ND(0)	= 0.707
SLVB0NF(0)	= 300

MFLAGS(0).#BI_QUAD1 = 0
SLVB1DD(0)	= 0.707
SLVB1DF(0)	= 400
SLVB1ND(0)	= 0.707
SLVB1NF(0)	= 300

SLAFF(0)	= 0
SLJFF(0)	= 0

SETTLE(0)	= 2
TARGRAD(0)	= 5E-6 

STOP

#2
! AXIS 1 TUNING

SLIKI(1)	= 13188
SLIKP(1)	= 662

SLPKP(1)	= 170

SLVKP(1)	= 572
SLVKI(1)	= 1030

MFLAGS(1).#NOFILT =0 
SLVSOF(1)	= 1000
SLVSOFD(1)	= 0.707

MFLAGS(1).#NOTCH	= 1
SLVNATT(1)	= 3.06
SLVNFRQ(1)	= 1664
SLVNWID(1)	= 160

MFLAGS(1).#BI_QUAD = 0
SLVB0DD(1)	= 0.707
SLVB0DF(1)	= 400
SLVB0ND(1)	= 0.707
SLVB0NF(1)	= 300

MFLAGS(1).#BI_QUAD1 = 0
SLVB1DD(1)	= 0.707
SLVB1DF(1)	= 400
SLVB1ND(1)	= 0.707
SLVB1NF(1)	= 300

SLAFF(1)	= 35.2
SLJFF(1)	= 0

SETTLE(1)	= 2
TARGRAD(1)	= 5E-6

STOP
#3
! LEFT LIMIT MOTION AND HOMING 
!

INT AXIS_1_Y_BOTTOM = 1

ENABLE AXIS_1_Y_BOTTOM
COMMUT AXIS_1_Y_BOTTOM
WAIT 6000

FDEF(AXIS_1_Y_BOTTOM).#LL=0	! Disable the axis left limit default response.
FDEF(AXIS_1_Y_BOTTOM).#RL=0	! Disable the axis right limit default response.

! MOVIE TO LEFT LIMIT
JOG/V AXIS_1_Y_BOTTOM,-5		!
TILL FAULT(AXIS_1_Y_BOTTOM).#LL!
JOG/V AXIS_1_Y_BOTTOM,5		! 
TILL ^FAULT(AXIS_1_Y_BOTTOM).#LL		! Wait till left limit reliease 
DISP "LEFT LIMIT"

! MOVIE TO POSITIVE
IST(AXIS_1_Y_BOTTOM).#IND = 0
TILL IST(AXIS_1_Y_BOTTOM).#IND
SET FPOS(AXIS_1_Y_BOTTOM) = FPOS(AXIS_1_Y_BOTTOM) - IND(AXIS_1_Y_BOTTOM)
PTP (AXIS_1_Y_BOTTOM),0

! SETUP DEFALT RESPONCE OF THE LIMITS
FDEF(AXIS_1_Y_BOTTOM).#LL=1	! Enable the axis left limit default response
FDEF(AXIS_1_Y_BOTTOM).#RL=1	! Enable the axis right limit default response

STOP
#4
! AXIS_0_X_TOP
! LEFT LIMIT MOTION AND HOMING

INT AXIS_0_Y_TOP = 0

ENABLE AXIS_0_Y_TOP
COMMUT AXIS_0_Y_TOP
WAIT 6000


FDEF(AXIS_0_Y_TOP).#LL=0	! Disable the axis left limit default response.
FDEF(AXIS_0_Y_TOP).#RL=0	! Disable the axis right limit default response.

! MOVIE TO LEFT LIMIT
JOG/V AXIS_0_Y_TOP,-5		!
TILL FAULT(AXIS_0_Y_TOP).#LL!
JOG/V AXIS_0_Y_TOP,5		! 
TILL ^FAULT(AXIS_0_Y_TOP).#LL		! Wait till left limit reliease 
DISP "LEFT LIMIT"

! MOVIE TO POSITIVE
IST(AXIS_0_Y_TOP).#IND = 0
TILL IST(AXIS_0_Y_TOP).#IND
SET FPOS(AXIS_0_Y_TOP) = FPOS(AXIS_0_Y_TOP) - IND(AXIS_0_Y_TOP)
PTP (AXIS_0_Y_TOP),0

! SETUP DEFALT RESPONCE OF THE LIMITS
FDEF(AXIS_0_Y_TOP).#LL=1	! Enable the axis left limit default response
FDEF(AXIS_0_Y_TOP).#RL=1	! Enable the axis right limit default response
DISP "AXIS_0_Y_TOP AT ZERO"
STOP
#6
AUTOEXEC: 
	START 1,1
	START 2,1
	START 3,4
	START 4,4
	DISP "STARTING PROCIDIURE IS FINISHED"
STOP

#10
! MOTION

REAL COUNT

ENABLE 0
ENABLE 1

!COMMUT 0
!COMMUT 1
!WAIT 10000

WHILE (COUNT < 500)
	PTP/E 0,10
	!PTP/E 1,10
	
	WAIT 500
	
	PTP/E 0,0
	!PTP/E 1,0
	
	WAIT 500 
	COUNT = COUNT +1
	
	DISP COUNT
END


STOP
#A
!axisdef X=0,Y=1,Z=2,T=3,A=4,B=5,C=6,D=7
!axisdef x=0,y=1,z=2,t=3,a=4,b=5,c=6,d=7
global int I(100),I0,I1,I2,I3,I4,I5,I6,I7,I8,I9,I90,I91,I92,I93,I94,I95,I96,I97,I98,I99
global real V(100),V0,V1,V2,V3,V4,V5,V6,V7,V8,V9,V90,V91,V92,V93,V94,V95,V96,V97,V98,V99
